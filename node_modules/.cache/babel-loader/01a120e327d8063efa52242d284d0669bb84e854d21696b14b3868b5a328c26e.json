{"ast":null,"code":"var _jsxFileName = \"D:\\\\Nam 5\\\\C\\u0110TH\\\\RCP_Project\\\\frontend_web\\\\src\\\\views\\\\Users.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport UsersController from \"../controllers/UserController.jsx\";\nimport \"../styles/users.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Users() {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [selected, setSelected] = useState([]);\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n  const fetchUsers = async () => {\n    try {\n      const data = await UsersController.getAllUsers();\n      // đảm bảo data là mảng\n      if (Array.isArray(data)) setUsers(data);else setUsers([]);\n    } catch (error) {\n      console.error(\"Không lấy được user:\", error);\n    }\n  };\n  const handleSelect = id => {\n    if (selected.includes(id)) setSelected(prev => prev.filter(s => s !== id));else setSelected(prev => [...prev, id]);\n  };\n  const handleDeleteSelected = async () => {\n    if (!selected.length) return;\n    if (!window.confirm(`Xóa ${selected.length} user đã chọn?`)) return;\n    try {\n      await UsersController.deleteUsersByIds(selected);\n      fetchUsers();\n      setSelected([]);\n    } catch (error) {\n      console.error(\"Xóa thất bại:\", error);\n    }\n  };\n  const handleRoleChange = async (id, role) => {\n    try {\n      await UsersController.updateRole(id, role);\n      fetchUsers();\n    } catch (error) {\n      console.error(\"Cập nhật role thất bại:\", error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"page-content\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Qu\\u1EA3n l\\xFD Ng\\u01B0\\u1EDDi d\\xF9ng\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this), selected.length > 0 && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleDeleteSelected,\n      children: [\"X\\xF3a \", selected.length, \" user \\u0111\\xE3 ch\\u1ECDn\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"user-table\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: selected.length === users.length && users.length > 0,\n              onChange: e => {\n                if (e.target.checked) setSelected(users.map(u => u.id));else setSelected([]);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Fullname\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            children: \"Role\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: users.map(u => /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: selected.includes(u.id) ? \"selected\" : \"\",\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: selected.includes(u.id),\n              onChange: () => handleSelect(u.id)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: u.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: u.fullname\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: u.email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              value: u.role,\n              onChange: e => handleRoleChange(u.id, e.target.value),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"Admin\",\n                children: \"Admin\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"User\",\n                children: \"User\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 15\n          }, this)]\n        }, u.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n}\n_s(Users, \"sItMyvSRyN8WNIKVlDbESql2A9w=\");\n_c = Users;\nexport default Users;\nvar _c;\n$RefreshReg$(_c, \"Users\");","map":{"version":3,"names":["React","useState","useEffect","UsersController","jsxDEV","_jsxDEV","Users","_s","users","setUsers","selected","setSelected","fetchUsers","data","getAllUsers","Array","isArray","error","console","handleSelect","id","includes","prev","filter","s","handleDeleteSelected","length","window","confirm","deleteUsersByIds","handleRoleChange","role","updateRole","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","type","checked","onChange","e","target","map","u","username","fullname","email","value","_c","$RefreshReg$"],"sources":["D:/Nam 5/CĐTH/RCP_Project/frontend_web/src/views/Users.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport UsersController from \"../controllers/UserController.jsx\";\nimport \"../styles/users.css\";\n\nfunction Users() {\n  const [users, setUsers] = useState([]);\n  const [selected, setSelected] = useState([]);\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    try {\n      const data = await UsersController.getAllUsers();\n      // đảm bảo data là mảng\n      if (Array.isArray(data)) setUsers(data);\n      else setUsers([]);\n    } catch (error) {\n      console.error(\"Không lấy được user:\", error);\n    }\n  };\n\n  const handleSelect = id => {\n    if (selected.includes(id)) setSelected(prev => prev.filter(s => s !== id));\n    else setSelected(prev => [...prev, id]);\n  };\n\n  const handleDeleteSelected = async () => {\n    if (!selected.length) return;\n    if (!window.confirm(`Xóa ${selected.length} user đã chọn?`)) return;\n\n    try {\n      await UsersController.deleteUsersByIds(selected);\n      fetchUsers();\n      setSelected([]);\n    } catch (error) {\n      console.error(\"Xóa thất bại:\", error);\n    }\n  };\n\n  const handleRoleChange = async (id, role) => {\n    try {\n      await UsersController.updateRole(id, role);\n      fetchUsers();\n    } catch (error) {\n      console.error(\"Cập nhật role thất bại:\", error);\n    }\n  };\n\n  return (\n    <div className=\"page-content\">\n      <h2>Quản lý Người dùng</h2>\n\n      {selected.length > 0 && (\n        <button onClick={handleDeleteSelected}>\n          Xóa {selected.length} user đã chọn\n        </button>\n      )}\n\n      <table className=\"user-table\">\n        <thead>\n          <tr>\n            <th>\n              <input\n                type=\"checkbox\"\n                checked={selected.length === users.length && users.length > 0}\n                onChange={e => {\n                  if (e.target.checked) setSelected(users.map(u => u.id));\n                  else setSelected([]);\n                }}\n              />\n            </th>\n            <th>Username</th>\n            <th>Fullname</th>\n            <th>Email</th>\n            <th>Role</th>\n          </tr>\n        </thead>\n        <tbody>\n          {users.map(u => (\n            <tr key={u.id} className={selected.includes(u.id) ? \"selected\" : \"\"}>\n              <td>\n                <input\n                  type=\"checkbox\"\n                  checked={selected.includes(u.id)}\n                  onChange={() => handleSelect(u.id)}\n                />\n              </td>\n              <td>{u.username}</td>\n              <td>{u.fullname}</td>\n              <td>{u.email}</td>\n              <td>\n                <select\n                  value={u.role}\n                  onChange={e => handleRoleChange(u.id, e.target.value)}\n                >\n                  <option value=\"Admin\">Admin</option>\n                  <option value=\"User\">User</option>\n                </select>\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n}\n\nexport default Users;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}